import{a as A,B as R,j as S,c as p,l as i,f as l,n as r,F as v,G as _,H as T,m,C as b,u,w,p as x,e as N,T as I}from"./pinia-DEH50WAs.js";import{a as L}from"./WooRedirectCart-Bx5I6vDO.js";import{a as g}from"./SendQuote.vue_vue_type_style_index_0_lang-Bgmm8C5A.js";import{b as V,q as $}from"./widget-TfP9KzIn.js";import{_ as M}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./translationsStore-CB5AosK1.js";import"./convert-case-to-camel-case.utils-BvCCmEmI.js";import"./_commonjsHelpers-Cpj98o6Y.js";import"./_commonjs-dynamic-modules-TDtrdbi3.js";const P={class:"ccb-repeater-wrapper"},j=["onClick"],q={class:"ccb-repeater-item--label"},z={class:"ccb-repeater-item--counter"},D={key:0,class:"ccb-repeater-item--body"},G={class:"ccb-repeater-item--fields"},H={class:"ccb-repeater-item--actions"},J={class:"ccb-repeater-actions"},K=A({__name:"Repeater",props:{field:{}},setup(h){const E=h,{field:e}=R(E),f=V(),d=S({}),y=p(()=>a=>Array.from(a.values())),C=a=>{if(confirm("Are you sure to delete the repeated group of elements?")){const s=e.value.groupElements;Array.isArray(s)&&e.value.groupElements.splice(a,1),e.value.groupElements.forEach((n,t)=>Array.from(n.entries()).forEach(([o,c])=>{c.repeaterIdx=t})),f.recalculateTotals()}},k=()=>{if(e.value.repeatCount===e.value.groupElements.length)return;const a=$(),s=new Map,n=e.value.originalElements||[];for(const t of n){const o=a.addField(t,e.value.groupElements.length,e.value.alias);o&&s.set(t.alias,o)}e.value.groupElements.push(s),f.recalculateTotals()},B=p(()=>+e.value.repeatCount===e.value.groupElements.length),F=p(()=>{var a;return((a=e.value)==null?void 0:a.additionalStyles)||""});return(a,s)=>(l(),i("div",P,[(l(!0),i(v,null,_(u(e).groupElements,(n,t)=>(l(),i("div",{class:T(["ccb-repeater-item",{"ccb-collapsed":d.value[t],[F.value]:!0}])},[r("div",{class:"ccb-repeater-item--header",onClick:o=>d.value[t]=!d.value[t]},[s[0]||(s[0]=r("span",{class:"ccb-repeater-item--icon ccb-icon-Path-3514"},null,-1)),r("span",q,b(u(e).label),1),r("span",z,"#"+b(t+1),1)],8,j),m(I,{name:"fade"},{default:w(()=>{var o;return[d.value[t]?x("",!0):(l(),i("div",D,[r("div",G,[(l(!0),i(v,null,_(y.value(n),c=>(l(),N(L,{key:c.alias,name:c.fieldName,field:c},null,8,["name","field"]))),128))]),r("div",H,[m(g,{type:"danger","on-click":()=>C(t),text:u(e).removeButtonLabel,icon:"ccb-icon-Trash-filled","icon-position":"before",disabled:((o=u(e).groupElements)==null?void 0:o.length)===1},null,8,["on-click","text","disabled"])])]))]}),_:2},1024)],2))),256)),r("div",J,[m(g,{type:"success-outlined","on-click":k,text:u(e).addButtonLabel,icon:"ccb-icon-Add-Plus-Circle","icon-position":"before",disabled:B.value},null,8,["text","disabled"])])]))}}),ae=M(K,[["__scopeId","data-v-dd938f5b"]]);export{ae as default};
//# sourceMappingURL=index-ChwtVF1n.js.map
