{"version":3,"mappings":"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","names":["isFloat","n","regExp","props","__props","field","toRefs","requiredType","ref","inputId","computed","labelId","callbackStore","useCallbackStore","currencyInstance","useCurrency","appearanceStore","useAppearanceStore","fieldStore","useFieldsStore","conditionsStore","useConditionsStore","singleFieldMixins","useSingleField","translationsStore","useTranslationsStore","pageBreakerStore","usePageBreakerStore","backupValue","rawInput","isEditing","forceUpdateKey","requiredWarningText","_a","useSettingsStore","formattedValue","numericString","rawDisplay","options","separator","numericValue","parseQuantityValue","getStyleComponent","defineAsyncComponent","__vitePreload","updateValue","updateWithValue","alias","fromCondition","displayString","checkMinMaxRequired","onInput","event","target","changeHandler","onIncrement","onDecrement","value","onFocus","e","parseFormattedValue","onBlur","parseField","parsedValue","lessThenExpected","moreThenExpected","toFixedCount","count","toFixedCountDefault","toFixedCountStep","toFixedNoRound","num","decimals","factor","floatVal","settings","numAfterInteger","decimalSeparator","_b","thousandsSeparator","_c","_e","_d","_g","_f","_i","_h","parts","sanitizedValue","result","decimalsRaw","_j","resultString","intValueFilter","keyCode","separatorCode","isRequired","getRangeRequiredText","onMounted"],"ignoreList":[],"sources":["../../src/widget/shared/utils/is-float.utils.ts","../../src/widget/features/calculator-fields/components/Quantity/Quantity.vue"],"sourcesContent":["export const isFloat = (n: string): boolean => {\n  if (n === undefined || n?.length < 0) {\n    return false;\n  }\n  const regExp = /^[-+]?[0-9]+\\.[0-9]+$/;\n  return !!n.toString().match(regExp);\n};\n","<template>\n  <div\n    class=\"ccb-field ccb-field-quantity\"\n    :class=\"{\n      required: isRequired,\n      'ccb-field-disabled': field.disabled,\n      [field.additionalStyles || '']: !!field.additionalStyles,\n    }\"\n  >\n    <div class=\"ccb-field__label\">\n      <div v-if=\"isRequired\" class=\"ccb-required-tooltip\">\n        <RequiredHint\n          v-if=\"requiredType === 'value_range'\"\n          :field=\"field\"\n          :text=\"getRangeRequiredText\"\n        />\n        <RequiredHint v-else :field=\"field\" :text=\"requiredWarningText\" />\n      </div>\n      <div class=\"ccb-field__title\">\n        <span :id=\"labelId\">{{ field.label }}</span>\n        <span v-if=\"field.required\" class=\"ccb-field-required-mark\">*</span>\n      </div>\n    </div>\n\n    <div\n      v-if=\"appearanceStore.getAppearanceDescriptionPosition === 'before'\"\n      class=\"ccb-field__descriptions ccb-before\"\n    >\n      <div v-if=\"!field.hideMinMax\" class=\"ccb-field__description\">\n        {{ translationsStore.getTranslations.min }}: {{ field.min }} -\n        {{ translationsStore.getTranslations.max }}: {{ field.max }}\n      </div>\n      <div v-if=\"field.description\" class=\"ccb-field__description\">\n        {{ field.description }}\n      </div>\n    </div>\n\n    <component\n      :is=\"getStyleComponent\"\n      :field=\"field\"\n      :value=\"formattedValue\"\n      :input-id=\"inputId\"\n      :aria-labelledby=\"labelId\"\n      @input=\"onInput\"\n      @focus=\"onFocus\"\n      @focusout=\"parseField\"\n      @blur=\"onBlur\"\n      @keypress=\"intValueFilter\"\n      :key=\"forceUpdateKey\"\n      @increment=\"onIncrement\"\n      @decrement=\"onDecrement\"\n    />\n\n    <div\n      v-if=\"appearanceStore.getAppearanceDescriptionPosition === 'after'\"\n      class=\"ccb-field__descriptions ccb-after\"\n    >\n      <div v-if=\"!field.hideMinMax\" class=\"ccb-field__description\">\n        {{ translationsStore.getTranslations.min }}: {{ field.min }} -\n        {{ translationsStore.getTranslations.max }}: {{ field.max }}\n      </div>\n      <div v-if=\"field.description\" class=\"ccb-field__description\">\n        {{ field.description }}\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { toRefs, computed, ref, onMounted, defineAsyncComponent } from \"vue\";\nimport { IQuantityField } from \"@/widget/shared/types/fields\";\nimport { useAppearanceStore } from \"@/widget/app/providers/stores/appearanceStore.ts\";\nimport { useFieldsStore } from \"@/widget/app/providers/stores/fieldsStore.ts\";\nimport { useConditionsStore } from \"@/widget/app/providers/stores/conditionsStore.ts\";\nimport { useCurrency } from \"@/widget/actions/fields/composable/useCurrency.ts\";\nimport { useSingleField } from \"@/widget/actions/fields/composable/useSingleField.ts\";\nimport { useCallbackStore } from \"@/widget/app/providers/stores/callbackStore.ts\";\nimport RequiredHint from \"@/widget/shared/ui/components/Required-hint/RequiredHint.vue\";\nimport { useTranslationsStore } from \"@/widget/app/providers/stores/translationsStore\";\nimport { useSettingsStore } from \"@/widget/app/providers/stores/settingsStore.ts\";\nimport { isFloat } from \"@/widget/shared/utils/is-float.utils\";\nimport { usePageBreakerStore } from \"@/widget/app/providers/stores/pageBreakerStore.ts\";\n\ntype Props = {\n  field: IQuantityField;\n};\n\nconst props = defineProps<Props>();\nconst { field } = toRefs(props);\n\nconst requiredType = ref<string>(\"required\");\nconst inputId = computed(() => `ccb_quantity_${field.value.alias}`);\nconst labelId = computed(() => `ccb_label_${field.value.alias}`);\n\nconst callbackStore = useCallbackStore();\nconst currencyInstance = useCurrency();\nconst appearanceStore = useAppearanceStore();\nconst fieldStore = useFieldsStore();\nconst conditionsStore = useConditionsStore();\nconst singleFieldMixins = useSingleField();\nconst translationsStore = useTranslationsStore();\nconst pageBreakerStore = usePageBreakerStore();\n\nconst backupValue = ref<string>(\"\");\nconst rawInput = ref<string>(field.value.originalValue.toString());\nconst isEditing = ref<boolean>(false);\nconst forceUpdateKey = ref<number>(0);\n\nconst requiredWarningText = computed(() => {\n  const settingStore = useSettingsStore();\n  return settingStore.getWarningTexts?.requiredMsg || \"\";\n});\n\nconst formattedValue = computed(() => {\n  if (isEditing.value) {\n    return rawInput.value;\n  }\n\n  const numericString = backupValue.value.toString();\n  let rawDisplay = numericString;\n\n  if (field.value.enabledCurrencySettings || field.value.fieldCurrency) {\n    const options = currencyInstance.getCurrencyOptions(field.value);\n    const separator = options?.decimalSeparator || \".\";\n\n    if (separator !== \".\" && rawDisplay.includes(\".\")) {\n      rawDisplay = rawDisplay.replace(\".\", separator);\n    }\n  }\n\n  rawInput.value = rawDisplay;\n\n  const numericValue = field.value.round\n    ? Math.round(+numericString)\n    : +numericString;\n\n  return parseQuantityValue(numericValue.toString());\n});\n\nconst getStyleComponent = computed(() => {\n  if (field.value.styles.style === \"default\") {\n    return defineAsyncComponent(() => import(`./styles/Default.vue`));\n  }\n\n  if (field.value.styles.style === \"buttons\") {\n    return defineAsyncComponent(() => import(`./styles/Buttons.vue`));\n  }\n});\n\nconst updateValue = (\n  updateWithValue = false,\n  numericValue: number,\n  alias?: string,\n  fromCondition?: boolean,\n) => {\n  if (alias && alias !== field.value.alias) {\n    return;\n  }\n\n  const numericString = numericValue.toString();\n  backupValue.value = numericString;\n\n  if (!isEditing.value || alias) {\n    const options = currencyInstance.getCurrencyOptions(field.value);\n    let displayString = numericString;\n\n    const separator = options?.decimalSeparator;\n\n    if (\n      (field.value.enabledCurrencySettings || field.value.fieldCurrency) &&\n      separator &&\n      separator !== \".\" &&\n      displayString.includes(\".\")\n    ) {\n      displayString = displayString.replace(\".\", separator);\n    }\n\n    rawInput.value = displayString;\n  }\n  checkMinMaxRequired();\n\n  if (updateWithValue && typeof numericValue !== \"undefined\") {\n    field.value.value = numericValue;\n    field.value.originalValue = numericValue;\n  }\n\n  if (field.value.multiply) {\n    field.value.value = field.value.value * field.value.unit;\n  }\n\n  field.value.displayValue = singleFieldMixins.getCommonFieldDisplayView(\n    field.value,\n    rawInput.value,\n  );\n\n  fieldStore.updateField(field.value.alias, field.value, fromCondition);\n  conditionsStore.applyConditionForField(field.value.alias);\n  if (\n    fieldStore.getPageBreakEnabled &&\n    fieldStore.getActivePage.action === \"not_skip\"\n  ) {\n    pageBreakerStore.checkPageFieldsConditions();\n  }\n};\n\nconst onInput = (event: Event) => {\n  const target = event.target as HTMLInputElement;\n\n  if (isEditing.value) {\n    changeHandler(target.value);\n  }\n};\n\nconst onIncrement = () => {\n  if (Number(backupValue.value) < field.value.max) {\n    backupValue.value = (\n      Number(backupValue.value) + Number(field.value.step)\n    ).toString();\n  }\n\n  changeHandler(backupValue.value);\n};\n\nconst onDecrement = () => {\n  if (Number(backupValue.value) > field.value.min) {\n    backupValue.value = (\n      Number(backupValue.value) - Number(field.value.step)\n    ).toString();\n  }\n\n  changeHandler(backupValue.value);\n};\n\nconst changeHandler = (value: string) => {\n  rawInput.value = value;\n\n  const options = currencyInstance.getCurrencyOptions(field.value);\n\n  const numericValue = currencyInstance.parseCurrency(\n    value.toString(),\n    options,\n  );\n\n  if (isNaN(numericValue)) {\n    return;\n  }\n\n  updateValue(true, numericValue);\n  backupValue.value = numericValue.toString();\n};\n\nconst onFocus = (e: Event) => {\n  const target = e.target as HTMLInputElement;\n  isEditing.value = true;\n  rawInput.value = parseFormattedValue(target.value || \"0\");\n};\n\nconst onBlur = () => {\n  isEditing.value = false;\n};\n\nconst parseField = () => {\n  const parsedValue = parseQuantityValue(backupValue.value);\n  rawInput.value = parsedValue;\n};\n\nconst checkMinMaxRequired = () => {\n  const numericValue = currencyInstance.parseCurrency(\n    rawInput.value.toString(),\n    currencyInstance.getCurrencyOptions(field.value),\n  );\n\n  if (isNaN(numericValue)) {\n    requiredType.value = \"required\";\n    return;\n  }\n\n  const lessThenExpected = numericValue < +field.value.min;\n  const moreThenExpected = numericValue > +field.value.max;\n\n  if (lessThenExpected || moreThenExpected) {\n    requiredType.value = \"value_range\";\n  } else {\n    requiredType.value = \"required\";\n  }\n};\n\nconst toFixedCount = computed(() => {\n  let count = 0;\n  if (\n    isFloat(field.value.defaultValue.toString()) ||\n    isFloat(field.value.step.toString())\n  ) {\n    let toFixedCountDefault = field.value.defaultValue.toString().split(\".\")[1]\n      ? field.value.defaultValue.toString().split(\".\")[1].length\n      : 0;\n    let toFixedCountStep = field.value.step.toString().split(\".\")[1]\n      ? field.value.step.toString().split(\".\")[1].length\n      : 0;\n    count = Math.max(toFixedCountDefault, toFixedCountStep);\n  }\n\n  return count;\n});\n\nconst toFixedNoRound = (num: number, decimals: number): number => {\n  const factor = Math.pow(10, decimals);\n  return Math.floor(num * factor) / factor;\n};\n\nconst parseQuantityValue = (value: number | string): string => {\n  if (typeof value === \"number\" && value < 0) {\n    value = 0;\n  }\n\n  value = value.toString().replace(\",\", \".\");\n\n  if (!field.value.enabledCurrencySettings && !field.value.fieldCurrency) {\n    const floatVal = parseFloat(value);\n    return toFixedNoRound(floatVal, toFixedCount.value).toString();\n  }\n\n  if (isNaN(Number(value.replace(/,/g, \".\"))) || value.length === 0) {\n    value = \"0\";\n  }\n\n  let numericValue = parseFloat(value.replace(/,/g, \".\"));\n\n  const settings = useSettingsStore();\n\n  let numAfterInteger: number =\n    settings.getCurrencySettings?.numAfterInteger || 0;\n\n  let decimalSeparator: string =\n    settings.getCurrencySettings?.decimalSeparator || \".\";\n\n  let thousandsSeparator: string =\n    settings.getCurrencySettings?.thousandsSeparator || \",\";\n\n  if (field.value.fieldCurrency) {\n    numAfterInteger = field.value?.fieldCurrencySettings?.numAfterInteger || 0;\n    decimalSeparator =\n      field.value?.fieldCurrencySettings?.decimalSeparator || \".\";\n    thousandsSeparator =\n      field.value?.fieldCurrencySettings?.thousandsSeparator || \",\";\n  }\n\n  if (numAfterInteger > 0) {\n    numericValue = toFixedNoRound(\n      numericValue,\n      parseInt(numAfterInteger.toString()),\n    );\n    value = numericValue.toFixed(numAfterInteger);\n\n    // Set decimal separator\n    value = value.toString().replace(\".\", decimalSeparator);\n\n    // Set thousand separator\n    const parts = value.split(decimalSeparator);\n\n    parts[0] = parts[0].replace(/\\B(?=(\\d{3})+(?!\\d))/g, thousandsSeparator);\n    value = parts.join(decimalSeparator);\n  } else {\n    value = numericValue\n      .toString()\n      .replace(/\\B(?=(\\d{3})+(?!\\d))/g, thousandsSeparator);\n  }\n\n  return value;\n};\n\nconst parseFormattedValue = (value: string) => {\n  const settings = useSettingsStore();\n\n  let numAfterInteger: number =\n    settings.getCurrencySettings?.numAfterInteger || 0;\n\n  let decimalSeparator: string =\n    settings.getCurrencySettings?.decimalSeparator || \".\";\n\n  let thousandsSeparator: string =\n    settings.getCurrencySettings?.thousandsSeparator || \",\";\n\n  if (field.value.fieldCurrency) {\n    numAfterInteger = field.value?.fieldCurrencySettings?.numAfterInteger || 0;\n    decimalSeparator =\n      field.value?.fieldCurrencySettings?.decimalSeparator || \".\";\n    thousandsSeparator =\n      field.value?.fieldCurrencySettings?.thousandsSeparator || \",\";\n  }\n\n  let parts;\n  if (value.includes(\".\") && value.includes(\",\")) {\n    parts = value.split(decimalSeparator);\n  } else if (value.includes(\",\")) {\n    parts = value.split(\",\");\n  } else if (value.includes(\".\")) {\n    parts = value.split(\".\");\n  } else {\n    parts = [value];\n  }\n\n  parts[0] = parts[0].split(thousandsSeparator).join(\"\");\n\n  let sanitizedValue = parts.join(decimalSeparator);\n\n  const options = currencyInstance.getCurrencyOptions(field.value);\n\n  let result = currencyInstance.parseCurrency(sanitizedValue, options);\n\n  if (isNaN(result)) {\n    return sanitizedValue;\n  }\n\n  const decimalsRaw =\n    options?.numAfterInteger ??\n    numAfterInteger ??\n    settings.getCurrencySettings?.numAfterInteger ??\n    0;\n\n  const decimals = Number(decimalsRaw);\n\n  if (Number.isFinite(decimals) && decimals >= 0) {\n    result = Number(result.toFixed(decimals));\n  }\n\n  let resultString = result.toString();\n\n  const separator = options?.decimalSeparator || decimalSeparator;\n\n  if (separator && separator !== \".\" && resultString.includes(\".\")) {\n    resultString = resultString.replace(\".\", separator);\n  }\n\n  return resultString;\n};\n\nconst intValueFilter = (event: KeyboardEvent): void => {\n  const settings = useSettingsStore();\n\n  let decimalSeparator: string =\n    settings.getCurrencySettings?.decimalSeparator || \".\";\n\n  if (field.value.fieldCurrency) {\n    decimalSeparator =\n      field.value?.fieldCurrencySettings?.decimalSeparator || \".\";\n  }\n\n  let keyCode = event.keyCode ? event.keyCode : event.which;\n  let separatorCode = 46;\n  if (decimalSeparator === \",\") {\n    separatorCode = 44;\n  }\n\n  if ((keyCode < 48 || keyCode > 57) && keyCode !== separatorCode) {\n    // 46 is dot 44 is comma\n    event.preventDefault();\n  }\n};\n\nconst isRequired = computed(() => {\n  const numericValue = currencyInstance.parseCurrency(\n    rawInput.value.toString(),\n    currencyInstance.getCurrencyOptions(field.value),\n  );\n\n  if (!isNaN(numericValue)) {\n    const lessThenExpected = numericValue < field.value.min;\n    const moreThenExpected = numericValue > field.value.max;\n\n    if (lessThenExpected || moreThenExpected) {\n      return true;\n    }\n  }\n\n  return fieldStore.checkFieldRequired(field.value);\n});\n\nconst getRangeRequiredText = computed(() => {\n  return `\n    ${translationsStore.getTranslations.valueMustBeBetween} ${field.value.min} ${translationsStore.getTranslations.and} ${field.value.max}\n  `;\n});\n\ncallbackStore.add(\"updateQuantity\", updateValue);\n\nonMounted(() => {\n  rawInput.value = field.value.originalValue.toString();\n  backupValue.value = rawInput.value;\n  updateValue(false, field.value.originalValue, undefined, true);\n});\n</script>\n<style lang=\"scss\">\n.ccb-field {\n  @media (min-width: 1025px) {\n    &.field-width-25 {\n      .ccb-quantity-buttons {\n        flex-wrap: wrap;\n        &.ccb-quantity-buttons--right {\n          &.ccb-quantity-buttons--separation {\n            input {\n              margin-right: 0;\n            }\n          }\n        }\n        &.ccb-quantity-buttons--both {\n          &.ccb-quantity-buttons--separation {\n            gap: 0;\n          }\n          .ccb-quantity-buttons__item {\n            &.down {\n              order: 2;\n            }\n            &.up {\n              order: 3;\n            }\n          }\n          input {\n            border: var(--ccb-fields-border) var(--ccb-fields-border-style)\n              var(--ccb-fields-border-color);\n            order: 1;\n          }\n        }\n        input {\n          border-radius: var(--ccb-fields-border-radius)\n            var(--ccb-fields-border-radius) 0 0;\n          border-right: var(--ccb-fields-border) var(--ccb-fields-border-style)\n            var(--ccb-fields-border-color);\n        }\n        .ccb-quantity-buttons__item {\n          min-width: 40px;\n          border-top: none;\n          flex-basis: 50%;\n          &.down {\n            border-radius: 0 0 0 var(--ccb-fields-border-radius);\n          }\n          &.up {\n            border-radius: 0 0 var(--ccb-fields-border-radius) 0;\n          }\n        }\n      }\n    }\n  }\n}\n</style>\n<style lang=\"scss\" scoped>\ninput[type=\"number\"]::-webkit-outer-spin-button,\ninput[type=\"number\"]::-webkit-inner-spin-button {\n  -webkit-appearance: none !important;\n  margin: 0 !important;\n}\n</style>\n"],"file":"assets/index-B-XfpIr8.js"}