const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./Buttons-CJldvQ5_.css"])))=>i.map(i=>d[i]);
import{a as Ce,B as be,j as I,c as S,b as J,_ as X,o as he,l as v,f as d,n as R,p as y,e as P,u as n,C as g,r as xe,H as ke}from"./pinia-DEH50WAs.js";import{m as Fe,f as Ve,b as Ne,n as Ie,c as Te,u as M,l as qe,o as Ae}from"./widget-TfP9KzIn.js";import{_ as Y}from"./RequiredHint.vue_vue_type_style_index_0_lang-CWtgfcXY.js";import{u as Me}from"./translationsStore-CB5AosK1.js";import{_ as Be}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./convert-case-to-camel-case.utils-BvCCmEmI.js";import"./_commonjsHelpers-Cpj98o6Y.js";import"./_commonjs-dynamic-modules-TDtrdbi3.js";const Z=_=>{if(_===void 0||(_==null?void 0:_.length)<0)return!1;const B=/^[-+]?[0-9]+\.[0-9]+$/;return!!_.toString().match(B)},Ee={class:"ccb-field__label"},De={key:0,class:"ccb-required-tooltip"},Re={class:"ccb-field__title"},Pe=["id"],Oe={key:0,class:"ccb-field-required-mark"},$e={key:0,class:"ccb-field__descriptions ccb-before"},we={key:0,class:"ccb-field__description"},je={key:1,class:"ccb-field__description"},Qe={key:1,class:"ccb-field__descriptions ccb-after"},ze={key:0,class:"ccb-field__description"},He={key:1,class:"ccb-field__description"},Ke=Ce({__name:"Quantity",props:{field:{}},setup(_){const B=_,{field:e}=be(B),T=I("required"),ee=S(()=>`ccb_quantity_${e.value.alias}`),O=S(()=>`ccb_label_${e.value.alias}`),te=Fe(),f=qe(),$=Ve(),q=Ne(),ae=Ie(),re=Ae(),h=Me(),ne=Te(),u=I(""),p=I(e.value.originalValue.toString()),F=I(!1),ie=I(0),se=S(()=>{var a;return((a=M().getWarningTexts)==null?void 0:a.requiredMsg)||""}),le=S(()=>{if(F.value)return p.value;const t=u.value.toString();let a=t;if(e.value.enabledCurrencySettings||e.value.fieldCurrency){const i=f.getCurrencyOptions(e.value),o=(i==null?void 0:i.decimalSeparator)||".";o!=="."&&a.includes(".")&&(a=a.replace(".",o))}p.value=a;const r=e.value.round?Math.round(+t):+t;return j(r.toString())}),oe=S(()=>{if(e.value.styles.style==="default")return J(()=>X(()=>import("./Default-Bt74ReCA.js"),[],import.meta.url));if(e.value.styles.style==="buttons")return J(()=>X(()=>import("./Buttons-Dk4Yfw1k.js"),__vite__mapDeps([0]),import.meta.url))}),E=(t=!1,a,r,i)=>{if(r&&r!==e.value.alias)return;const o=a.toString();if(u.value=o,!F.value||r){const s=f.getCurrencyOptions(e.value);let c=o;const l=s==null?void 0:s.decimalSeparator;(e.value.enabledCurrencySettings||e.value.fieldCurrency)&&l&&l!=="."&&c.includes(".")&&(c=c.replace(".",l)),p.value=c}ve(),t&&typeof a<"u"&&(e.value.value=a,e.value.originalValue=a),e.value.multiply&&(e.value.value=e.value.value*e.value.unit),e.value.displayValue=re.getCommonFieldDisplayView(e.value,p.value),q.updateField(e.value.alias,e.value,i),ae.applyConditionForField(e.value.alias),q.getPageBreakEnabled&&q.getActivePage.action==="not_skip"&&ne.checkPageFieldsConditions()},ue=t=>{const a=t.target;F.value&&D(a.value)},ce=()=>{Number(u.value)<e.value.max&&(u.value=(Number(u.value)+Number(e.value.step)).toString()),D(u.value)},de=()=>{Number(u.value)>e.value.min&&(u.value=(Number(u.value)-Number(e.value.step)).toString()),D(u.value)},D=t=>{p.value=t;const a=f.getCurrencyOptions(e.value),r=f.parseCurrency(t.toString(),a);isNaN(r)||(E(!0,r),u.value=r.toString())},pe=t=>{const a=t.target;F.value=!0,p.value=Se(a.value||"0")},ge=()=>{F.value=!1},fe=()=>{const t=j(u.value);p.value=t},ve=()=>{const t=f.parseCurrency(p.value.toString(),f.getCurrencyOptions(e.value));if(isNaN(t)){T.value="required";return}const a=t<+e.value.min,r=t>+e.value.max;a||r?T.value="value_range":T.value="required"},me=S(()=>{let t=0;if(Z(e.value.defaultValue.toString())||Z(e.value.step.toString())){let a=e.value.defaultValue.toString().split(".")[1]?e.value.defaultValue.toString().split(".")[1].length:0,r=e.value.step.toString().split(".")[1]?e.value.step.toString().split(".")[1].length:0;t=Math.max(a,r)}return t}),w=(t,a)=>{const r=Math.pow(10,a);return Math.floor(t*r)/r},j=t=>{var c,l,C,A,x,b,k,V,N;if(typeof t=="number"&&t<0&&(t=0),t=t.toString().replace(",","."),!e.value.enabledCurrencySettings&&!e.value.fieldCurrency){const m=parseFloat(t);return w(m,me.value).toString()}(isNaN(Number(t.replace(/,/g,".")))||t.length===0)&&(t="0");let a=parseFloat(t.replace(/,/g,"."));const r=M();let i=((c=r.getCurrencySettings)==null?void 0:c.numAfterInteger)||0,o=((l=r.getCurrencySettings)==null?void 0:l.decimalSeparator)||".",s=((C=r.getCurrencySettings)==null?void 0:C.thousandsSeparator)||",";if(e.value.fieldCurrency&&(i=((x=(A=e.value)==null?void 0:A.fieldCurrencySettings)==null?void 0:x.numAfterInteger)||0,o=((k=(b=e.value)==null?void 0:b.fieldCurrencySettings)==null?void 0:k.decimalSeparator)||".",s=((N=(V=e.value)==null?void 0:V.fieldCurrencySettings)==null?void 0:N.thousandsSeparator)||","),i>0){a=w(a,parseInt(i.toString())),t=a.toFixed(i),t=t.toString().replace(".",o);const m=t.split(o);m[0]=m[0].replace(/\B(?=(\d{3})+(?!\d))/g,s),t=m.join(o)}else t=a.toString().replace(/\B(?=(\d{3})+(?!\d))/g,s);return t},Se=t=>{var V,N,m,z,H,K,L,W,U,G;const a=M();let r=((V=a.getCurrencySettings)==null?void 0:V.numAfterInteger)||0,i=((N=a.getCurrencySettings)==null?void 0:N.decimalSeparator)||".",o=((m=a.getCurrencySettings)==null?void 0:m.thousandsSeparator)||",";e.value.fieldCurrency&&(r=((H=(z=e.value)==null?void 0:z.fieldCurrencySettings)==null?void 0:H.numAfterInteger)||0,i=((L=(K=e.value)==null?void 0:K.fieldCurrencySettings)==null?void 0:L.decimalSeparator)||".",o=((U=(W=e.value)==null?void 0:W.fieldCurrencySettings)==null?void 0:U.thousandsSeparator)||",");let s;t.includes(".")&&t.includes(",")?s=t.split(i):t.includes(",")?s=t.split(","):t.includes(".")?s=t.split("."):s=[t],s[0]=s[0].split(o).join("");let c=s.join(i);const l=f.getCurrencyOptions(e.value);let C=f.parseCurrency(c,l);if(isNaN(C))return c;const A=(l==null?void 0:l.numAfterInteger)??r??((G=a.getCurrencySettings)==null?void 0:G.numAfterInteger)??0,x=Number(A);Number.isFinite(x)&&x>=0&&(C=Number(C.toFixed(x)));let b=C.toString();const k=(l==null?void 0:l.decimalSeparator)||i;return k&&k!=="."&&b.includes(".")&&(b=b.replace(".",k)),b},ye=t=>{var s,c,l;let r=((s=M().getCurrencySettings)==null?void 0:s.decimalSeparator)||".";e.value.fieldCurrency&&(r=((l=(c=e.value)==null?void 0:c.fieldCurrencySettings)==null?void 0:l.decimalSeparator)||".");let i=t.keyCode?t.keyCode:t.which,o=46;r===","&&(o=44),(i<48||i>57)&&i!==o&&t.preventDefault()},Q=S(()=>{const t=f.parseCurrency(p.value.toString(),f.getCurrencyOptions(e.value));if(!isNaN(t)){const a=t<e.value.min,r=t>e.value.max;if(a||r)return!0}return q.checkFieldRequired(e.value)}),_e=S(()=>`
    ${h.getTranslations.valueMustBeBetween} ${e.value.min} ${h.getTranslations.and} ${e.value.max}
  `);return te.add("updateQuantity",E),he(()=>{p.value=e.value.originalValue.toString(),u.value=p.value,E(!1,e.value.originalValue,void 0,!0)}),(t,a)=>(d(),v("div",{class:ke(["ccb-field ccb-field-quantity",{required:Q.value,"ccb-field-disabled":n(e).disabled,[n(e).additionalStyles||""]:!!n(e).additionalStyles}])},[R("div",Ee,[Q.value?(d(),v("div",De,[T.value==="value_range"?(d(),P(Y,{key:0,field:n(e),text:_e.value},null,8,["field","text"])):(d(),P(Y,{key:1,field:n(e),text:se.value},null,8,["field","text"]))])):y("",!0),R("div",Re,[R("span",{id:O.value},g(n(e).label),9,Pe),n(e).required?(d(),v("span",Oe,"*")):y("",!0)])]),n($).getAppearanceDescriptionPosition==="before"?(d(),v("div",$e,[n(e).hideMinMax?y("",!0):(d(),v("div",we,g(n(h).getTranslations.min)+": "+g(n(e).min)+" - "+g(n(h).getTranslations.max)+": "+g(n(e).max),1)),n(e).description?(d(),v("div",je,g(n(e).description),1)):y("",!0)])):y("",!0),(d(),P(xe(oe.value),{field:n(e),value:le.value,"input-id":ee.value,"aria-labelledby":O.value,onInput:ue,onFocus:pe,onFocusout:fe,onBlur:ge,onKeypress:ye,key:ie.value,onIncrement:ce,onDecrement:de},null,40,["field","value","input-id","aria-labelledby"])),n($).getAppearanceDescriptionPosition==="after"?(d(),v("div",Qe,[n(e).hideMinMax?y("",!0):(d(),v("div",ze,g(n(h).getTranslations.min)+": "+g(n(e).min)+" - "+g(n(h).getTranslations.max)+": "+g(n(e).max),1)),n(e).description?(d(),v("div",He,g(n(e).description),1)):y("",!0)])):y("",!0)],2))}}),et=Be(Ke,[["__scopeId","data-v-2c9e973a"]]);export{et as default};
//# sourceMappingURL=index-B-XfpIr8.js.map
