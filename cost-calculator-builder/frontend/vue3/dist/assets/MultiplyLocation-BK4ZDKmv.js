import{a as $,B as H,j as L,c as S,L as K,o as R,l as c,f as d,n as o,m as _,C as r,u as a,w as U,F as j,G as Z,M as q,ab as J,H as Q}from"./pinia-DEH50WAs.js";import{a as y,_ as W}from"./SendQuote.vue_vue_type_style_index_0_lang-Bgmm8C5A.js";import{b as X,n as Y,m as ee,c as te}from"./widget-TfP9KzIn.js";import{L as oe,u as ae}from"./index-BUjNB5vr.js";import{u as se}from"./translationsStore-CB5AosK1.js";import{_ as le}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./_commonjsHelpers-Cpj98o6Y.js";import"./_commonjs-dynamic-modules-TDtrdbi3.js";import"./convert-case-to-camel-case.utils-BvCCmEmI.js";const ie={class:"ccb-multiply-location"},ne={class:"ccb-multiply-location__input-wrapper"},ce={class:"label"},de={class:"ccb-multiply-location__description"},re={key:0},ue={key:1,class:"ccb-multiply-location__adressname"},pe={class:"ccb-location-modal"},me={class:"ccb-location-modal__body"},_e={class:"ccb-location-modal__sidebar"},ve={class:"ccb-location-modal__title"},be={class:"ccb-location-modal__locations"},ge=["name","value","checked"],fe={class:"ccb-radio-label"},ye=["id"],he={class:"ccb-location-modal__footer"},Pe=$({__name:"MultiplyLocation",props:{field:{}},setup(C){const v=X(),w=Y(),i=se(),M=ee(),N=te(),x=C,{field:e}=H(x),b=L(),{getGoogleApiKey:F,mapOptions:T,generateId:B,parseLocationCoordinates:n,generateGoogleLink:V,getMeasure:G,getPickUpIconPath:h}=ae(),I=new oe({apiKey:F(),version:"weekly",libraries:["places","geometry"]});let P=B(4),g=L(!0);const A=()=>{b.value.showPopup()},u=()=>{b.value.hidePopup()};let p;const D=()=>{let t=e.value.multiplyLocations[0].coordinates;I.load().then(()=>{const s=document.getElementById(P);s&&(p=new google.maps.Map(s,{...T(),center:{...n(t)}}),k.value.forEach(l=>{let m={position:n(l.coordinates),map:p};h()&&(m.icon={url:h(),scaledSize:new google.maps.Size(40,40)}),new google.maps.Marker(m)}))})},E=()=>{let t=e.value.multiplyLocations[0].coordinates;e.value.selectedPoint={addressName:"",coordinates:t,label:""},g.value=!0,f(),u()},z=()=>{if(e.value.selectedPoint.addressName){g.value=!1;const t={addressName:e.value.selectedPoint.addressName,coordinates:n(e.value.selectedPoint.coordinates),addressLink:V(n(e.value.selectedPoint.coordinates)),measure:G()};e.value.userSelectedOptions=t,f(),u()}else u()},O=S(()=>{let t=e.value.selectedPoint.label||e.value.selectedPoint.addressName||"";return t.length>15?t.slice(0,25)+"...":t}),f=(t,s)=>{t&&t!==e.value.alias||(e.value.displayValue=O.value,v.updateField(e.value.alias,e.value,s),w.applyConditionForField(e.value.alias),v.getPageBreakEnabled&&v.getActivePage.action==="not_skip"&&N.checkPageFieldsConditions())};M.add("updateGeolocation",t=>{setTimeout(()=>{f(t,!0)},100)});const k=S(()=>Array.isArray(e.value.multiplyLocations)?e.value.multiplyLocations:[]);return K(()=>e.value.selectedPoint,t=>{t&&t.coordinates&&(p.panTo(n(t.coordinates)),p.setZoom(15))},{deep:!0}),R(()=>{D()}),(t,s)=>(d(),c("div",ie,[o("div",ne,[o("button",{class:"ccb-multiply-location__action",onClick:A},[s[1]||(s[1]=o("span",{class:"icon"},[o("i",{class:"ccb-icon-location"})],-1)),o("span",ce,r(a(i).getTranslations.openMap),1)]),o("div",de,[!a(e).selectedPoint.addressName&&!a(e).selectedPoint.label?(d(),c("span",re,r(a(i).getTranslations.chooseFromMap),1)):(d(),c("span",ue,r(a(e).selectedPoint.addressName||a(e).selectedPoint.label),1))])]),_(W,{ref_key:"popup",ref:b},{default:U(()=>[o("div",pe,[o("div",me,[o("div",_e,[o("div",ve,r(a(i).getTranslations.selectLocation),1),o("div",be,[(d(!0),c(j,null,Z(k.value,l=>(d(),c("div",{key:l.addressName,class:"ccb-default-radio"},[o("label",null,[q(o("input",{"onUpdate:modelValue":s[0]||(s[0]=m=>a(e).selectedPoint=m),type:"radio",name:l.label,value:l,checked:a(e).selectedPoint.coordinates===l.coordinates},null,8,ge),[[J,a(e).selectedPoint]]),o("span",fe,r(l.label.length?l.label:l.addressName),1)])]))),128))])]),o("div",{id:a(P),class:"ccb-location-modal__map"},null,8,ye)]),o("div",he,[_(y,{type:"light",text:a(i).getTranslations.clearLocation,class:Q(["clear",{disable:a(g)}]),onClick:E},null,8,["text","class"]),_(y,{type:"light",text:a(i).getTranslations.cancel,onClick:u},null,8,["text"]),_(y,{type:"success",text:a(i).getTranslations.saveLocation,onClick:z},null,8,["text"])])])]),_:1},512)]))}}),Te=le(Pe,[["__scopeId","data-v-21d067b2"]]);export{Te as default};
//# sourceMappingURL=MultiplyLocation-BK4ZDKmv.js.map
